<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Customers</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
</head>

<body>
  <div class="container-fluid py-3">
    <div class="card shadow">
      <div class="card-body">
        <h3 class="card-title mt-2 mb-4">Customers</h3>
        <table class="table table-hover" id="customer-table">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Full name</th>
              <th scope="col">Email</th>
              <th scope="col">Address</th>
              <th scope="col" class="text-center">Active</th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody id="customer-table-body">
          </tbody>
        </table>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script>
    <script src="http://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">
    <script>
      $(document).ready(() => {
        $.ajax({
          url: 'http://localhost:3000/api/customers',
          type: 'GET'
        }).done(res => {
          const customerList = res.data.customers;
          for (const customer of customerList) {
            const row = `<tr>
              <th scope="row">${customer.customer_id}</th>
              <td>${customer.first_name} ${customer.last_name}</td>
              <td>${customer.email}</td>
              <td>${customer.address}</td>
              <td class="text-center">${customer.active ? `<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check-circle-fill" fill="#44b543" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
</svg>` : `<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check-circle-fill" fill="silver" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
</svg>`}</td>
              <td>
                <button class="btn btn-secondary">Edit</button>
                <button class="btn btn-light">Remove</button>
              </td>
            </tr>`;

            $('#customer-table').append(row);
          }

          $('#customer-table').DataTable();
        })
      })
    </script>
</body>

</html>